{% extends 'baseback.html.twig' %}

{% block title%} Liste des Utilisateurs{% endblock %}

{% block side %}

    <div class="app-sidebar__overlay" data-toggle="sidebar"></div>
        <aside class="app-sidebar doc-sidebar">
            <a class="header-brand sidemenu-header-brand" href="index.html">
                <img src="../../assets/images/brand/logo1.png" class="header-brand-img brand-logo-main" alt="Gowell logo">
                <img src="../../assets/images/brand/favicon-white.png" class="header-brand-img brand-logo-toggled" alt="Gowell logo">
            </a>

            <!--User Section-->
            <div class="app-sidebar__user">
                <div class="dropdown user-pro-body text-center">
                    <div class="user-pic">
                        <img src="../../assets/images/faces/male/24.jpg" alt="user-img" class="rounded-circle mb-1">
                    </div>
                    <div class="user-info">
                        <h5 class="mb-0 font-weight-bold fs-16">{{ app.user.username }}</h5>
                        <span class="app-sidebar__user-name text-sm text-white-80">Admin</span>
                    </div>
                </div>
            </div>
        </aside>



{% endblock side %}
 {% block body %}
     {#
<h1>Litse des Utilisateurs</h1>
<div align=center></div><table id="users" class="table table-striped" border=1" width="50%">
    <thead>
    <tr>
        <th>Id</th>
        <th>email</th>
        <th>roles</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    {% for user in users %}
        <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.email }}</td>
            <td>
                {% for role in user.roles %}
                    {% if role=="ROLE_USER" %}
                        Utilisateur
                    {% elseif role=="ROLE_EDITOR" %}
                        Editeur
                    {% elseif role=="ROLE_ADMIN" %}
                        Administrateur
                    {% endif %}
                {% endfor %}
            </td>
            <td>
                <a href="{{ path('admin_modifier_utilisateur', {'id': user.id }) }}" class="btn btndark">Modifier</a>
                <a href="{{ path('admin_supprimer_utilisateur', {'id': user.id }) }}" class="btn btndark">supprimer</a>
            </td>

        </tr>
    {% endfor %}
    </tbody>
</table></div>#}

     <div class="app-content">
         <div class="side-app">
             <div class="page-header">
                 <h4 class="page-title">Liste des utilisateurs</h4>
                 <ol class="breadcrumb">
                     <li class="breadcrumb-item"><a href="#"><i class="fe   fe-box mr-1"></i> Tables</a></li>
                     <li class="breadcrumb-item active" aria-current="page">Liste des utilisateurs</li>
                 </ol>
             </div>



             <div class="row">
                 <div class="col-md-12 col-lg-12">
                     <div class="card">
                         <div class="card-header">

                         </div>
                         <div class="card-body">

                             <div class="table-responsive">

                                 <table id="example" class="table table-striped table-bordered" >

                                     <thead>
                                     <tr>
                                         <th class="wd-15p">Id </th>
                                         <th class="wd-15p">Email</th>
                                         <th class="wd-20p">Role</th>
                                         <th class="wd-15p">Actions</th>


                                     </tr>

                                     </thead>
                                     {% for user in users %}

                                         <tbody>


                                         <tr>
                                             <td>{{ user.id }}</td>
                                             <td>{{ user.email }}</td>
                                             <td>
                                                 {% for role in user.roles %}
                                                     {% if role=="ROLE_USER" %}
                                                         Utilisateur
                                                     {% elseif role=="ROLE_EDITOR" %}
                                                         Editeur
                                                     {% elseif role=="ROLE_ADMIN" %}
                                                         Administrateur
                                                     {% endif %}
                                                 {% endfor %}
                                             </td>
                                             <td>
                                                 <a href="{{ path('admin_modifier_utilisateur', {'id': user.id }) }}" class="btn btn-danger">Modifier</a>
                                                 <a href="{{ path('admin_supprimer_utilisateur', {'id': user.id }) }}" class="btn btn-success" onclick="return myFunction()">supprimer</a>
                                             </td>

                                         </tr>
                                         </tbody>
                                     {% endfor %}


                                 </table>
                                 <div style="float:right;">{{ knp_pagination_render(users) }}
                                 </div>

                             </div>

                         </div>

                         <!-- table-wrapper -->
                     </div>
                     <!-- section-wrapper -->
                 </div>

             </div>
         </div>
     </div>
     <script>
        function myFunction() {
            var r = confirm("OK to delete?");
            if (r == false) {
                return false;
            }

        }
    </script>

{% endblock %}